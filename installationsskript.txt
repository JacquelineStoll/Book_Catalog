drop table if exists book;
create table book (
    b_id int primary key auto_increment,
    titel varchar(255),
    auflage varchar(255),
    klappentext text,
    a_id int,
    v_id int,
    g_id int
);

drop table if exists autor;
create table autor (
    a_id int primary key auto_increment,
    vorname varchar(255),
    nachname varchar(255),
    geburtsdatum date
);

drop table if exists ausleihung;
create table ausleihung (
    al_id int primary key auto_increment,
    startdatum date,
    enddatum date,
    zurueckgegeben bit(1),
    k_id int,
    b_id int
);

drop table if exists genre;
create table genre (
    g_id int primary key auto_increment,
    name varchar(255)
);

drop table if exists kunde;
create table kunde (
    k_id int primary key auto_increment,
    vorname varchar(255),
    nachname varchar(255),
    geburtsdatum date,
    strasse varchar(255),
    hausnummer varchar(255),
    plz varchar(255),
    ort varchar(255)
);

drop table if exists verlag;
create table verlag (
    v_id int primary key auto_increment,
    name varchar(255),
    standort varchar(255)
);

alter table book
add constraint autor_id
foreign key (a_id) references autor(a_id),
add constraint verlag_id
foreign key (v_id) references verlag(v_id),
add constraint genre_id
foreign key (g_id) references genre(g_id);

alter table ausleihung
add constraint kunde_id
foreign key (k_id) references kunde(k_id),
add constraint book_id
foreign key (b_id) references book(b_id);

truncate autor;
insert into autor (vorname, nachname, geburtsdatum)
values
	('J. R. R.', 'Tolkien', '1892-01-03'),
	('E. L.', 'James', '1963-03-07'),
	('Stephen', 'King', '1947-09-21');

truncate genre;
insert into genre (`name`)
values
	('Horror'),
	('Sci-Fi'),
	('Fantasy'),
	('Romantisch');

truncate verlag;
insert into verlag (`name`, standort)
values
	('Heyne Verlag', 'München'),
	('Klett-Cotta Verlag', 'Stuttgard'),
	('Goldmann Verlag', 'München');

insert into book (titel, auflage, klappentext, a_id, v_id, g_id)
values
	('Der Herr der Ringe - Die Gefährten', '5. Auflage', 'Der Schauplatz des Herrn der Ringe ist Mittelerde, eine alternative Welt, und erzählt wird von der gefahrvollen Quest einiger Gefährten, die in einem dramatischen Kampf gegen das Böse endet. Durch einen merkwürdigen Zufall fällt dem Hobbit Bilbo Beutlin ein Zauberring zu, dessen Kraft, käme er in die falschen Hände, zu einer absoluten Herrschaft des Bösen führen würde. Bilbo übergibt den Ring an seinen Neffen Frodo, der den Ring in der Schicksalskluft zerstören soll. Hobbits sind kleine, gemütliche Leute, dabei aber erstaunlich zäh. Sie leben in einem ländlichen Idyll, dem Auenland.', 1, 2, 3),
	('Der Herr der Ringe - Die zwei Türme', '8. Auflage', 'Durch einen merkwürdigen Zufall fällt dem Hobbit Bilbo Beutlin ein Zauberring zu, dessen Kraft, käme er in die falschen Hände, zu einer absoluten Herrschaft des Bösen führen würde. Bilbo übergibt den Ring an seinen Neffen Frodo, der den Ring in der Schicksalskluft zerstören soll. Hobbits sind kleine, gemütliche Leute, dabei aber erstaunlich zäh. Sie leben in einem ländlichen Idyll, dem Auenland.', 1, 2, 3),
	('Der Herr der Ringe - Die Rückkehr des Königs', '8. Auflage', 'Der Schauplatz des Herrn der Ringe ist Mittelerde, eine alternative Welt, und erzählt wird von der gefahrvollen Quest einiger Gefährten, die in einem dramatischen Kampf gegen das Böse endet. Durch einen merkwürdigen Zufall fällt dem Hobbit Bilbo Beutlin ein Zauberring zu, dessen Kraft, käme er in die falschen Hände, zu einer absoluten Herrschaft des Bösen führen würde. Bilbo übergibt den Ring an seinen Neffen Frodo, der den Ring in der Schicksalskluft zerstören soll. Hobbits sind kleine, gemütliche Leute, dabei aber erstaunlich zäh. Sie leben in einem ländlichen Idyll, dem Auenland.', 1, 2, 3);